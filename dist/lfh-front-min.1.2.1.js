!function(t,e,n){"use strict";L.AwesomeMarkers={},L.AwesomeMarkers.version="2.0.1",L.AwesomeMarkers.Icon=L.Icon.extend({options:{iconSize:[35,45],iconAnchor:[17,42],popupAnchor:[1,-32],shadowAnchor:[10,12],shadowSize:[36,16],className:"awesome-marker",prefix:"glyphicon",spinClass:"fa-spin",extraClasses:"",icon:"home",markerColor:"blue",iconColor:"white"},initialize:function(t){t=L.Util.setOptions(this,t)},createIcon:function(){var t=e.createElement("div"),n=this.options;return n.icon&&(t.innerHTML=this._createInner()),n.bgPos&&(t.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"),this._setIconStyles(t,"icon-"+n.markerColor),t},_createInner:function(){var t,e="",n="",o="",i=this.options;return t=i.icon.slice(0,i.prefix.length+1)===i.prefix+"-"?i.icon:i.prefix+"-"+i.icon,i.spin&&"string"==typeof i.spinClass&&(e=i.spinClass),i.iconColor&&("white"===i.iconColor||"black"===i.iconColor?n="icon-"+i.iconColor:o="style='color: "+i.iconColor+"' "),"<i "+o+"class='"+i.extraClasses+" "+i.prefix+" "+t+" "+e+" "+n+"'></i>"},_setIconStyles:function(t,e){var n,o=this.options,i=L.point(o["shadow"===e?"shadowSize":"iconSize"]);n="shadow"===e?L.point(o.shadowAnchor||o.iconAnchor):L.point(o.iconAnchor),!n&&i&&(n=i.divideBy(2,!0)),t.className="awesome-marker-"+e+" "+o.className,n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},createShadow:function(){var t=e.createElement("div");return this._setIconStyles(t,"shadow"),t}}),L.AwesomeMarkers.icon=function(t){return new L.AwesomeMarkers.Icon(t)}}(0,document);var L=L||require("leaflet"),_MAX_POINT_INTERVAL_MS=15e3,_SECOND_IN_MILLIS=1e3,_MINUTE_IN_MILLIS=60*_SECOND_IN_MILLIS,_HOUR_IN_MILLIS=60*_MINUTE_IN_MILLIS,_DAY_IN_MILLIS=24*_HOUR_IN_MILLIS,_DEFAULT_MARKER_OPTS={startIconUrl:"pin-icon-start.png",endIconUrl:"pin-icon-end.png",shadowUrl:"pin-shadow.png",wptIconUrls:{"":"pin-icon-wpt.png"},iconSize:[33,50],shadowSize:[50,50],iconAnchor:[16,45],shadowAnchor:[16,47],clickable:!1},_DEFAULT_POLYLINE_OPTS={color:"blue"},_DEFAULT_GPX_OPTS={parseElements:["track","route","waypoint"]};L.GPX=L.FeatureGroup.extend({initialize:function(t,e){e.max_point_interval=e.max_point_interval||_MAX_POINT_INTERVAL_MS,e.marker_options=this._merge_objs(_DEFAULT_MARKER_OPTS,e.marker_options||{}),e.polyline_options=this._merge_objs(_DEFAULT_POLYLINE_OPTS,e.polyline_options||{}),e.gpx_options=this._merge_objs(_DEFAULT_GPX_OPTS,e.gpx_options||{}),L.Util.setOptions(this,e),L.GPXTrackIcon=L.Icon.extend({options:e.marker_options}),this._gpx=t,this._layers={},this._info={name:null,length:0,elevation:{gain:0,loss:0,max:0,min:1/0,_points:[]},hr:{avg:0,_total:0,_points:[]},duration:{start:null,end:null,moving:0,total:0}},t&&this._parse(t,e,this.options.async)},get_duration_string:function(t,e){var n="";t>=_DAY_IN_MILLIS&&(n+=Math.floor(t/_DAY_IN_MILLIS)+"d ",t%=_DAY_IN_MILLIS),t>=_HOUR_IN_MILLIS&&(n+=Math.floor(t/_HOUR_IN_MILLIS)+":",t%=_HOUR_IN_MILLIS);var o=Math.floor(t/_MINUTE_IN_MILLIS);t%=_MINUTE_IN_MILLIS,o<10&&(n+="0"),n+=o+"'";var i=Math.floor(t/_SECOND_IN_MILLIS);return t%=_SECOND_IN_MILLIS,i<10&&(n+="0"),n+=i,n+=!e&&t>0?"."+Math.round(1e3*Math.floor(t))/1e3:'"'},to_miles:function(t){return t/1.60934},to_ft:function(t){return 3.28084*t},m_to_km:function(t){return t/1e3},m_to_mi:function(t){return t/1609.34},get_name:function(){return this._info.name},get_desc:function(){return this._info.desc},get_author:function(){return this._info.author},get_copyright:function(){return this._info.copyright},get_distance:function(){return this._info.length},get_distance_imp:function(){return this.to_miles(this.m_to_km(this.get_distance()))},get_start_time:function(){return this._info.duration.start},get_end_time:function(){return this._info.duration.end},get_moving_time:function(){return this._info.duration.moving},get_total_time:function(){return this._info.duration.total},get_moving_pace:function(){return this.get_moving_time()/this.m_to_km(this.get_distance())},get_moving_pace_imp:function(){return this.get_moving_time()/this.get_distance_imp()},get_moving_speed:function(){return this.m_to_km(this.get_distance())/(this.get_moving_time()/36e5)},get_moving_speed_imp:function(){return this.to_miles(this.m_to_km(this.get_distance()))/(this.get_moving_time()/36e5)},get_total_speed:function(){return this.m_to_km(this.get_distance())/(this.get_total_time()/36e5)},get_total_speed_imp:function(){return this.to_miles(this.m_to_km(this.get_distance()))/(this.get_total_time()/36e5)},get_elevation_gain:function(){return this._info.elevation.gain},get_elevation_loss:function(){return this._info.elevation.loss},get_elevation_gain_imp:function(){return this.to_ft(this.get_elevation_gain())},get_elevation_loss_imp:function(){return this.to_ft(this.get_elevation_loss())},get_elevation_data:function(){var t=this;return this._info.elevation._points.map(function(e){return t._prepare_data_point(e,t.m_to_km,null,function(t,e){return null==t||null==e?null:t.toFixed(2)+" km, "+e.toFixed(0)+" m"})})},get_elevation_data_imp:function(){var t=this;return this._info.elevation._points.map(function(e){return t._prepare_data_point(e,t.m_to_mi,t.to_ft,function(t,e){return t.toFixed(2)+" mi, "+e.toFixed(0)+" ft"})})},get_elevation_max:function(){return this._info.elevation.max},get_elevation_min:function(){return this._info.elevation.min},get_elevation_max_imp:function(){return this.to_ft(this.get_elevation_max())},get_elevation_min_imp:function(){return this.to_ft(this.get_elevation_min())},get_average_hr:function(){return this._info.hr.avg},get_heartrate_data:function(){var t=this;return this._info.hr._points.map(function(e){return t._prepare_data_point(e,t.m_to_km,null,function(t,e){return t.toFixed(2)+" km, "+e.toFixed(0)+" bpm"})})},get_heartrate_data_imp:function(){var t=this;return this._info.hr._points.map(function(e){return t._prepare_data_point(e,t.m_to_mi,null,function(t,e){return t.toFixed(2)+" mi, "+e.toFixed(0)+" bpm"})})},get_options:function(){return this.getLayers()[0].getLayers()[0].options},reload:function(){this.clearLayers(),this._parse(this._gpx,this.options,this.options.async)},get_markers:function(){return this._markers},_merge_objs:function(t,e){var n={};for(var o in t)n[o]=t[o];for(var o in e)n[o]=e[o];return n},_prepare_data_point:function(t,e,n,o){var i=[e&&e(t[0])||t[0],n&&n(t[1])||t[1]];return i.push(o&&o(i[0],i[1])||i[0]+": "+i[1]),i},_load_xml:function(t,e,n,o){void 0==o&&(o=this.options.async),void 0==n&&(n=this.options);var i=new window.XMLHttpRequest;i.open("GET",t,o);try{i.overrideMimeType("text/xml")}catch(t){}var r=this;i.onreadystatechange=function(){4==i.readyState&&(200==i.status?e(i.responseXML,n):r.options.isLoaded=!0)},i.send(null)},_parse:function(t,e,n){var o=this,i=function(t,e){var n=o._parse_gpx_data(t,e);if(!n)return void(o.options.isLoaded=!0);o.addLayer(n),o.fire("loaded")};if("<"===t.substr(0,1)){var r=new DOMParser;n?setTimeout(function(){i(r.parseFromString(t,"text/xml"),e)}):i(r.parseFromString(t,"text/xml"),e)}else this._load_xml(t,i,e,n)},_markers:[],_parse_gpx_data:function(t,e){var n,o,i,r=[],a=[],l=e.gpx_options.parseElements;l.indexOf("route")>-1&&a.push(["rte","rtept"]),l.indexOf("track")>-1&&a.push(["trkseg","trkpt"]);var s=t.getElementsByTagName("name");s.length>0&&(this._info.name=s[0].textContent);var c=t.getElementsByTagName("desc");c.length>0&&(this._info.desc=c[0].textContent);var _=t.getElementsByTagName("author");_.length>0&&(this._info.author=_[0].textContent);var h=t.getElementsByTagName("copyright");for(h.length>0&&(this._info.copyright=h[0].textContent),n=0;n<a.length;n++)for(i=t.getElementsByTagName(a[n][0]),o=0;o<i.length;o++){var u=this._parse_trkseg(i[o],t,e,a[n][1]);if(0!==u.length){var f=new L.Polyline(u,e.polyline_options);if(this.fire("addline",{line:f}),r.push(f),e.marker_options.startIcon||e.marker_options.startIconUrl){var p=new L.Marker(u[0],{clickable:e.marker_options.clickable,icon:e.marker_options.startIcon||new L.GPXTrackIcon({iconUrl:e.marker_options.startIconUrl})});this._markers.push(p),this.fire("addpoint",{point:p,point_type:"start"}),r.push(p)}(e.marker_options.endIcon||e.marker_options.endIconUrl)&&(p=new L.Marker(u[u.length-1],{clickable:e.marker_options.clickable,icon:e.marker_options.endIcon||new L.GPXTrackIcon({iconUrl:e.marker_options.endIconUrl})}),this._markers.push(p),this.fire("addpoint",{point:p,point_type:"end"}),r.push(p))}}if(this._info.hr.avg=Math.round(this._info.hr._total/this._info.hr._points.length),l.indexOf("waypoint")>-1)for(i=t.getElementsByTagName("wpt"),o=0;o<i.length;o++){var m=new L.LatLng(i[o].getAttribute("lat"),i[o].getAttribute("lon")),d=i[o].getElementsByTagName("name"),s="";d.length>0&&(s=d[0].textContent);var g=i[o].getElementsByTagName("desc"),c="";g.length>0&&(c=g[0].textContent);var v=i[o].getElementsByTagName("sym"),I="";v.length>0&&(I=v[0].textContent);var y;if(e.marker_options.wptIcons&&e.marker_options.wptIcons[I])y=e.marker_options.wptIcons[I];else{if(!e.marker_options.wptIconUrls||!e.marker_options.wptIconUrls[I]){console.log('No icon or icon URL configured for symbol type "'+I+'"; ignoring waypoint.');continue}y=new L.GPXTrackIcon({iconUrl:e.marker_options.wptIconUrls[I]})}var x=new L.Marker(m,{clickable:!0,title:s,icon:y});x.bindPopup("<b>"+s+"</b>"+(c.length>0?"<br>"+c:"")).openPopup(),this.fire("addpoint",{point:x,point_type:"waypoint"}),r.push(x)}return r.length>1?new L.FeatureGroup(r):1==r.length?r[0]:void 0},_parse_trkseg:function(t,e,n,o){var i=t.getElementsByTagName(o);if(!i.length)return[];for(var r=[],a=null,l=0;l<i.length;l++){var s,c=new L.LatLng(i[l].getAttribute("lat"),i[l].getAttribute("lon"));if(c.meta={time:null,ele:null,hr:null},s=i[l].getElementsByTagName("time"),s.length>0&&(c.meta.time=new Date(Date.parse(s[0].textContent))),s=i[l].getElementsByTagName("ele"),s.length>0&&(c.meta.ele=parseFloat(s[0].textContent)),s=i[l].getElementsByTagNameNS("*","hr"),s.length>0&&(c.meta.hr=parseInt(s[0].textContent),this._info.hr._points.push([this._info.length,c.meta.hr]),this._info.hr._total+=c.meta.hr),c.meta.ele>this._info.elevation.max&&(this._info.elevation.max=c.meta.ele),c.meta.ele<this._info.elevation.min&&(this._info.elevation.min=c.meta.ele),this._info.elevation._points.push([this._info.length,c.meta.ele]),this._info.duration.end=c.meta.time,null!=a){this._info.length+=this._dist3d(a,c);var _=c.meta.ele-a.meta.ele;_>0?this._info.elevation.gain+=_:this._info.elevation.loss+=Math.abs(_),_=Math.abs(c.meta.time-a.meta.time),this._info.duration.total+=_,_<n.max_point_interval&&(this._info.duration.moving+=_)}else this._info.duration.start=c.meta.time;a=c,r.push(c)}return r},_dist2d:function(t,e){var n=this._deg2rad(e.lat-t.lat),o=this._deg2rad(e.lng-t.lng),i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(this._deg2rad(t.lat))*Math.cos(this._deg2rad(e.lat))*Math.sin(o/2)*Math.sin(o/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371e3},_dist3d:function(t,e){var n=this._dist2d(t,e),o=Math.abs(e.meta.ele-t.meta.ele);return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))},_deg2rad:function(t){return t*Math.PI/180}}),"object"==typeof module&&"object"==typeof module.exports?module.exports=L:"function"==typeof define&&define.amd&&define(L),function(){String.prototype.addslashes=function(){return this.replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},String.prototype.stripslashes=function(){return this.replace(/\\(.?)/g,function(t,e){switch(e){case"\\":return"\\";case"0":return"\0";case"":return"";default:return e}})},String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)},void 0===lfh.Util&&(lfh.Util={}),lfh.Util.step_round=function(t){var e=Math.round(Math.log(t)/Math.log(10)),n=Math.pow(10,e),o=Math.ceil(t/n)*n;return o/2>t?o/2:o},lfh.ZOOM_LIMIT=11,lfh.ICON_MOVE=L.icon({iconUrl:lfh.ICON_URL+"/markers/move.png",iconSize:[15,15],shadowSize:[0,0],iconAnchor:[7,7],shadowAnchor:[7,7],popupAnchor:[7,7]}),lfh.POINT_ICON=L.icon({iconUrl:lfh.ICON_URL+"/markers/pointS000063.png",iconSize:[10,10],shadowSize:[0,0],iconAnchor:[5,5],shadowAnchor:[5,5],popupAnchor:[5,5]}),lfh.initialize=function(){for(var t in lfh.data)if("function"!=typeof lfh.data[t]){new lfh.Map(t)}},lfh.TopControl=L.Control.extend({options:{position:"topright"},_fullscreen:!0,_list:!0,_selected:null,initialize:function(t,e){this._fullscreen=t.fullscreen,this._list=t.list,this._index=t.i,this._selected=e},onAdd:function(t){var e=L.DomUtil.create("div","lfh-container-fullscreen");if(this._fullscreen){var n=L.DomUtil.create("div","leaflet-bar leaflet-control lfh-control-fullscreen");e.appendChild(n),n.onclick=function(){var e=t._container.getAttribute("id"),n=L.DomUtil.get("lfh-fade");this.className.indexOf("actived")>=0?(L.DomUtil.get(e+"-container").appendChild(t._container),this.className=this.className.replace(" actived",""),n.className="",t.options.mousewheel||t.scrollWheelZoom.disable()):(n.appendChild(L.DomUtil.get(e)),this.className+=" actived",n.className="actived",t.scrollWheelZoom.enable()),t.invalidateSize(),lfh.resize(t._container)}}if(this._list){var o=L.DomUtil.create("div","leaflet-bar leaflet-control lfh-control-list");e.appendChild(o);new lfh.Link(t,o,"list-"+this._index,this._selected,null,null,null)}return e}}),lfh.ResetControl=L.Control.extend({options:{position:"topleft"},_center:null,_zoom:13,initialize:function(t,e){this._center=t,this._zoom=e},onAdd:function(t){var e=L.DomUtil.create("div","leaflet-bar leaflet-control lfh-control-refresh"),n=this._center,o=this._zoom;return e.onclick=function(){t.setView(n,o)},e}}),lfh.resize=function(t){for(var e=t.offsetHeight-70,n=t.getElementsByClassName("lfh-element"),o=0;o<n.length;o++)n.item(o).style.maxHeight=e+"px",n.item(o).querySelector(".lfh-element-content").style.maxHeight=e-40+"px"},lfh.Map=function(t){function n(t){"mapquest"==t?MQ.mapLayer().addTo(f):L.tileLayer(lfh.tiles[t].url,{attribution:lfh.tiles[t].attribution,minZoom:1,maxZoom:lfh.tiles[t].max_zoom}).addTo(f)}function o(t){f.addControl(new lfh.TopControl(t,S)),!y&&t.reset&&f.addControl(new lfh.ResetControl(g,v))}function i(){w=L.layerGroup(),v>=I&&w.addTo(f);for(var t in d.markers)"function"!=typeof d.markers[t]&&s(t)}function r(){for(var e in d.gpx)"function"!=typeof d.gpx[t]&&u(e)}function a(){f.on("zoomend",function(){f.getZoom()<I?this.hasLayer(w)&&this.removeLayer(w):this.hasLayer(w)||w.addTo(this)}),f.on("resize",function(){lfh.resize(this.getContainer())})}function l(t){M=L.marker(t,{icon:lfh.ICON_MOVE})}function s(t){var e=d.markers[t],n="marker-"+m+"-"+t,o=L.marker([e.lat,e.lng],{elem_id:n,icon:L.AwesomeMarkers.icon({icon:e.icon,prefix:"fa",markerColor:e.color}),title:e.title.stripslashes(),visibility:"zoom"});return e.popup=e.popup+"",e.popup.length>0&&o.bindPopup(e.popup.stripslashes()),"zoom"==e.visibility?w.addLayer(o):o.addTo(f),N.push([e.lat,e.lng]),c(o),new lfh.Link(f,o,n,S,null)}function c(t){if(x){var e=document.querySelector("#list-"+m+" ul.lfh-list-markers"),n=document.createElement("li");n.textContent=t.options.title,e.appendChild(n),L.DomEvent.addListener(n,"click",function(e){t.fire("click"),e.stopPropagation()})}}function _(t){if(x){var e=document.querySelector("#list-"+m+" ul.lfh-list-gpx"),n=document.createElement("li");n.textContent=document.querySelector("#"+t.options.elem_id+" span.lfh-trackname").textContent,e.appendChild(n),L.DomEvent.addListener(n,"click",function(e){t.fire("click")})}}function h(t){var e=1;for(var n in d.gpx)"function"!=typeof d.gpx[n]&&(e*=void 0!==k[n]&&k[n].options.isLoaded);e?(N.length>0&&f.fitBounds(N),g=f.getCenter(),v=f.getZoom(),lfh.tiles[d.map.tile].max_zoom<v&&(v=lfh.tiles[d.map.tile].max_zoom,f.setZoom(v)),t&&f.addControl(new lfh.ResetControl(g,v)),lfh.resize(f.getContainer()),y=!0):setTimeout(function(){h(t)},500)}function u(t){var n="track-"+m+"-"+t;k[t]=new L.GPX(d.gpx[t].src,{async:!0,isLoaded:!1,elem_id:n,marker_options:{startIcon:lfh.POINT_ICON,endIcon:lfh.POINT_ICON}}).on("loaded",function(e){if(e.target.options.isLoaded=!0,e.target.setStyle({color:d.gpx[t].color,weight:d.gpx[t].width}),y){var o=e.target.getBounds();N.push([o.getNorth(),o.getEast()]),N.push([o.getSouth(),o.getWest()])}_(e.target);new lfh.Link(f,e.target,n,S,M,d.gpx[t].unit,d.gpx[t].unit_h)}).on("failed",function(){e.target.options.isLoaded=!0,console.log("failed")}).addTo(f)}var f=null,p="lfh-"+t,m=t,d=lfh.data[t],g=[48.866667,2.333333],v=13,I=lfh.ZOOM_LIMIT,y=!0,x=!1,k=new Array,M=null,w=null,N=new Array,S={id:null,layer:null,dom:null,close:function(){if(null!=this.id){var t=this.dom.className;if(this.dom.className=t+" hidden",this.layer instanceof L.GPX){var e=this.layer.get_options();this.layer.setStyle({color:e.realColor}),f.removeLayer(M)}}},set:function(t){for(var e in t)this[e]=t[e]}};return function(t){d=lfh.data[t];var e=lfh.data[t].map;e.i=t,y=e.autocenter,x=e.list,g=[e.lat,e.lng],v=Math.min(e.zoom,lfh.tiles[e.tile].max_zoom),f=L.map(p).setView(g,v),n(e.tile),f.options.mousewheel=e.mousewheel,e.mousewheel||f.scrollWheelZoom.disable(),l(g),i(),r(),a(),h(e.reset),o(e)}(t),f},lfh.Link=function(t,e,n,o,i,r,a){function l(){if(f.close(),null==f.id||f.id!=c){if(h.className=h.className.replaceAll(" hidden",""),_ instanceof L.GPX){var e=_.get_options();_.setStyle({realColor:e.color,color:lfh.SELECTED_COLOR}),p.addTo(t)}_ instanceof L.Marker&&_.openPopup(),f.set({id:c,layer:_,dom:h})}else f.set({id:null,layer:null,dom:null}),_ instanceof L.Marker&&_.closePopup()}function s(){var t=h.querySelectorAll(".lfh-element .lfh-header");[].forEach.call(t,function(t){L.DomEvent.addListener(t,"click",function(e){e.preventDefault();var n=t.parentNode,o=n.className;o.indexOf("disabled")>=0||(o.indexOf("hidden")>=0?n.className=o.replaceAll(" hidden",""):n.className+=" hidden",e.stopPropagation())})}),L.DomEvent.addListener(h,"mousemove",function(t){t.stopPropagation()}),L.DomEvent.addListener(h,"mousewheel",function(t){t.stopPropagation(),t.preventDefault()});var e=h.querySelector(".lfh-close");_ instanceof L.Layer?(_.on("click",function(t){l()}),L.DomEvent.addListener(e,"click",function(t){_.fire("click")})):(L.DomEvent.addListener(_,"click",function(t){l()}),L.DomEvent.addListener(e,"click",function(t){l()}))}var c=n,_=e,h=L.DomUtil.get(n),u=t,f=o,p=i,m=r,d=a;return function(){void 0===_.options&&(_.options={}),_.options.elem_id=n,null!=h&&(u.getContainer().appendChild(h),s(),_ instanceof L.GPX)&&new lfh.Profile(u,_,h,p,m,d)}(),{dom:h,layer:_,id:c}},lfh.Profile=function(t,e,n,o,i,r){function a(t){return 220*t/(x*f)}function l(t){return 200-40*(t/p-w)/k}function s(){for(var t="M ",e=0;e<L.length;e++)t+=Math.round(a(L[e][0]))+","+Math.round(l(L[e][1])),e!=L.length-1&&(t+=" L ");return t}function c(){var t=s();g.querySelector(".lfh-profile-line").setAttribute("d",t);for(var e=1;e<5;e++)g.querySelector(".h"+e).textContent=w+e*k;for(var e=1;e<4;e++){var n=g.querySelector(".v"+e),o=Math.round(e*N*220/x);n.setAttribute("transform","translate("+o+", 0)"),n.querySelector("text").textContent=e*N}g.querySelector(".lfh-gpx-name").textContent=d.get_name(),g.querySelector(".lfh-gpx-distance").textContent=(Math.round(d.get_distance()/(100*f))/10).toString().replace(".",",")+" "+lfh.DISTANCE_UNIT[h].code,g.querySelector(".lfh-gpx-elevation-gain").textContent=Math.round(d.get_elevation_gain()/p)+" "+lfh.HEIGHT_UNIT[u].code,g.querySelector(".lfh-gpx-elevation-loss").textContent=Math.round(d.get_elevation_loss()/p)+" "+lfh.HEIGHT_UNIT[u].code,g.querySelector("svg").addEventListener("mousemove",function(t){var e=this.getBoundingClientRect(),n=t.pageX-e.left-50;n<0&&(n=0),n>220&&(n=220),g.querySelector(".lfh-move-line").setAttribute("transform","translate("+n+",0)");var o=n*x/220,e=_(o);m.setLatLng(v[e])},!1)}function _(t){for(var t=t*f,e=!1,n=0,o=L.length-1;!e&&o-n>1;){var i=Math.ceil((n+o)/2);e=L[i]==t,L[i][0]>t?o=i:n=i}return n}var h=i,u=r;if("km"==h)var f=1;else var f=1.60934;if("m"==u)var p=1;else var p=.3048;var m=o,d=e,g=n,v=d.getLayers()[0].getLayers()[0].getLatLngs(),L=d.get_elevation_data();if(null==L[0][1])return null;var I=d.get_elevation_max()/p,y=d.get_elevation_min()/p,x=L[L.length-1][0]/f,k=lfh.Util.step_round((I-y)/3.5),M=Math.ceil(I/k)*k,w=M-5*k,N=lfh.Util.step_round(x/4);return c(),{draw:c}},lfh.initialize()}();